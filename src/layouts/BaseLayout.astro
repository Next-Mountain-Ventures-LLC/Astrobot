---
import HeadSEO from "@/components/HeadSEO.astro";
import Footer from "@/components/Footer.astro";
import Header from "@/components/Header.astro";

interface Props {
  title?: string | undefined;
  description?: string | undefined;
  ogImage?: URL | undefined;
}

const { title, description, ogImage } = Astro.props;
---

<html lang="en">
  <head>
    <HeadSEO title={title} description={description} ogImage={ogImage} />
  </head>
  <body class="bg-background min-h-screen font-sans antialiased bg-gradient-to-b from-background to-background/95">
    <div class="relative flex min-h-screen flex-col">
      <Header />
      <main class="flex-auto">
        <slot />
      </main>
      <!-- Section scrolling for URL parameters -->
      <script is:inline>
      // Script to handle scrolling to sections based on URL parameters
      document.addEventListener('DOMContentLoaded', function() {
        // Get the section parameter from URL
        const urlParams = new URLSearchParams(window.location.search);
        const section = urlParams.get('section');
        
        if (section) {
          // Find the corresponding section element
          const sectionElement = document.getElementById(section);
          
          if (sectionElement) {
            // Smooth scroll to the section with a slight delay to ensure all content is loaded
            setTimeout(() => {
              sectionElement.scrollIntoView({ behavior: 'smooth' });
            }, 100);
          }
        }
      
        // Add click event listeners to all links with section parameters
        document.querySelectorAll('a[href^="/?section="]').forEach(link => {
          link.addEventListener('click', function(e) {
            // If we're on the homepage, handle scrolling directly
            if (window.location.pathname === '/' || window.location.pathname === '') {
              e.preventDefault();
              
              // Extract section name from href
              const hrefParams = new URLSearchParams(this.getAttribute('href').split('?')[1]);
              const sectionName = hrefParams.get('section');
              
              if (sectionName) {
                const targetSection = document.getElementById(sectionName);
                
                if (targetSection) {
                  // Update URL without refreshing page
                  const newUrl = window.location.pathname + '?section=' + sectionName;
                  window.history.pushState({}, '', newUrl);
                  
                  // Scroll to section
                  targetSection.scrollIntoView({ behavior: 'smooth' });
                }
              }
            }
            // If we're not on the homepage, let the normal link navigation happen
            // This will take us to the homepage with the section parameter in the URL
          });
        });
      });
      </script>
      <Footer />
    </div>
  </body>
</html>
